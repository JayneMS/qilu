<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>坐席话务统计</title>

    <!-- Common plugins -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/simple-line-icons.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/pace.css" rel="stylesheet">
    <link href="css/jasny-bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/nanoscroller.css">
    <link rel="stylesheet" href="css/metismenu.min.css">
    <!-- dataTables -->
    <link href="css/jquery.datatables.min.css" rel="stylesheet" type="text/css">
    <link href="css/responsive.bootstrap.min.css" rel="stylesheet" type="text/css">
    <!-- Treeview css -->
    <link href="css/style_1.css" rel="stylesheet" type="text/css" />
    <!--sweetalert css-->
    <link href="css/sweet-alert.css" rel="stylesheet">
    <!--template css-->
    <link href="css/jquery-ui.css" rel="stylesheet">

    <link href="css/blue.css" rel="stylesheet">
    <link href="css/switch.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/jayne.css" rel="stylesheet">
    <link href="css/vlstyle.css" rel="stylesheet">
    <link rel="stylesheet" href="css/timeline.css">
	<!-- datapicker css-->
	<link href="css/daterangepicker.css" rel="stylesheet">

</head>

<body>

    <!--main content start-->
    <section class="main-content">

        <!--page header start-->
        <div class="page-header">
            <div class="row">
                <div class="col-sm-6 flex-align-center">
                    <h4 class="inline">坐席话务统计</h4>
                </div>
                <div class="col-sm-6 text-right">
                    <ol class="breadcrumb">
                        <li>
                            <a href="javascript: void(0);">
                                <i class="fa fa-home"></i>
                            </a>
                        </li>
                        <li>报表统计</li>
                        <li>坐席话务统计</li>
                    </ol>
                </div>
            </div>
        </div>
        <!--page header end-->

        <!--page filter start-->
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default collapsed">
                    <div class="panel-heading">
                        <p class="inline">查询条件</p>
                        <a class="vl-a" id="resetBtn">重置查询条件</a>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label>单位编号</label>
                                    100
                                </fieldset>
                            </div>
                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label>坐席工号</label>
                                    <input class="input-150p black" name="uid" id="uid" />
                                </fieldset>
                            </div>
                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label>评价</label>
                                    <select name="branch" id="branch">
                                        <option selected="selected">满意</option>
                                        <option>一般</option>
                                        <option>不满意</option>
                                        <option>未评价</option>
                                    </select>
                                </fieldset>
                            </div>
	                        <div class="col-sm-3">	
                                <fieldset class="jquery-Ui-fieldset">
                            	<div class="">
                                    <label>请选择起止时间</label>
                                    <input name="daterange" id="daterange" type="text">
                            	</div>	
                                </fieldset>
	                        </div>
                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
		                            <label>是否处理</label>
		                            <input type="radio" name="deal" id="" value="" />是
		                            <input type="radio" name="deal" id="" value="" />否
                                </fieldset>
                            </div>
                            <div class="col-sm-3">
                                <fieldset class="jquery-Ui-fieldset">
                                    <label>呼入/呼出</label>
                                    <select name="call" id="call">
                                        <option selected="selected">呼入</option>
                                        <option>呼出</option>
                                    </select>
                                </fieldset>
                            </div>
                        </div>
                        <a href="javascript: void(0);" class="btn btn-primary inline float-right" onclick="search_tab()">开始查询</a>
                        <a href="javascript: void(0);" id="change-btn" class="btn btn-primary inline float-right" style="margin-right: 15px;" onclick="change_tab()">扇形图</a>
                    </div>
                </div>
            </div>
        </div>
        <!--page filter end-->

        <!--start page content-->
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default collapsed">
                    <div class="panel-body table-div" style="display: none;">
                        <table id="datatable" class="table table-striped dt-responsive nowrap">
                            <thead>
                                <tr>
                                    <th>工号</th>
                                    <th>姓名</th>
                                    <th>咨询</th>
                                    <th>预约挂号</th>
                                    <th>投诉</th>
                                    <th>表扬</th>
                                    <th>问题及建议</th>
                                    <th>院内事件</th>
                                    <th>院外事件</th>
                                    <th>呼入未分类</th>
                                    <th>满意度回访</th>
                                    <th>其他</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>w55sw9851</td>
                                    <td>王林</td>
                                    <td>20</td>
                                    <td>13</td>
                                    <td>3</td>
                                    <td>1738</td>
                                    <td>856</td>
                                    <td>50</td>
                                    <td>13</td>
                                    <td>12</td>
                                    <td>1</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>w55sw9851</td>
                                    <td>王林</td>
                                    <td>20</td>
                                    <td>13</td>
                                    <td>3</td>
                                    <td>1738</td>
                                    <td>856</td>
                                    <td>50</td>
                                    <td>13</td>
                                    <td>12</td>
                                    <td>1</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>w55sw9851</td>
                                    <td>王林</td>
                                    <td>20</td>
                                    <td>13</td>
                                    <td>3</td>
                                    <td>1738</td>
                                    <td>856</td>
                                    <td>50</td>
                                    <td>13</td>
                                    <td>12</td>
                                    <td>1</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>w55sw9851</td>
                                    <td>王林</td>
                                    <td>20</td>
                                    <td>13</td>
                                    <td>3</td>
                                    <td>1738</td>
                                    <td>856</td>
                                    <td>50</td>
                                    <td>13</td>
                                    <td>12</td>
                                    <td>1</td>
                                    <td>0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="panel-body bar-div">
				       <div id="container" style="height: 500px"></div>
                    </div>
                </div>
            </div>
        </div>
        <!--end row-->

        <!--end page content-->


    </section>
    <!--end main content-->

    <!--Common plugins-->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/pace.min.js"></script>
    <script src="js/jasny-bootstrap.min.js"></script>
    <script src="js/jquery.slimscroll.min.js"></script>
    <script src="js/jquery.nanoscroller.min.js"></script>
    <script src="js/metismenu.min.js"></script>
    <script src="js/float-custom.js"></script>

    <!--page script-->
    <script src="js/jquery.datatables.min.js"></script>
    <script src="js/datatables.responsive.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.custom.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/moment-with-locales.js"></script>
    <script src="js/daterangepicker.js"></script>
    <script src="js/jayne.js"></script>
    <script src="js/drawer.js"></script>
    <script src="js/bootstrap-datetimepicker.min.js"></script>
    
    <!-- iCheck for radio and checkboxes -->
    <script src="js/icheck.min.js"></script>
    <script src="js/tableConfig.js"></script>
	<script type="text/javascript" src="js/echarts.js"></script>
	<script type="text/javascript" src="js/echarts.common.min.js"></script>
	<script type="text/javascript" src="js/westeros.js"></script>
   	<script type="text/javascript">
		var dom = document.getElementById("container");
		var myChart = echarts.init(dom, 'westeros');
		var app = {};
		option = null;
		option = {
		    title : {
		        text: '坐席话务统计',
		        subtext: '呼入',
		        x:'center'
		    },
		    tooltip : {
		        trigger: 'item',
		        formatter: "{a} <br/>{b} : {c} ({d}%)"
		    },
		    legend: {
		        orient: 'vertical',
		        left: 'left',
		        data: ['咨询','预约挂号','投诉','表扬','问题及建议','院内事件','院外事件','呼入未分类']
		    },
		    series : [
		        {
		            name: '访问来源',
		            type: 'pie',
		            radius : '55%',
		            center: ['50%', '60%'],
		            data:[
		                {value:335, name:'咨询'},
		                {value:310, name:'预约挂号'},
		                {value:234, name:'投诉'},
		                {value:135, name:'表扬'},
		                {value:1548, name:'问题及建议'},
		                {value:1548, name:'院内事件'},
		                {value:1548, name:'院外事件'},
		                {value:1548, name:'呼入未分类'}
		            ],
		            itemStyle: {
		                emphasis: {
		                    shadowBlur: 10,
		                    shadowOffsetX: 0,
		                    shadowColor: 'rgba(0, 0, 0, 0.5)'
		                }
		            }
		        }
		    ]
		};
		;
		if (option && typeof option === "object") {
		    myChart.setOption(option, true);
		}
    </script>
  
    <script>
        //筛选查询条件
        function search_tab() {
            var branch = $('#branch').val().trim();
		    var daterange = $('#daterange').val().trim();
            var call = $('#call').val().trim();
            var uid = $('#uid').val().trim();
            alert(branch);
            alert(uid);
            //此处添加查询方法
        }

        //切换视图
        function change_tab() {
        	var intext = $('#change-btn').text().trim();
        	
        	if(intext=='扇形图'){
	        	$('.bar-div').css('display','none');
	        	$('.table-div').css('display','block');
	        	$('#change-btn').text('表格');
        	}else if(intext=='表格'){
	        	$('.bar-div').css('display','block');
	        	$('.table-div').css('display','none');
	        	$('#change-btn').text('扇形图');
        	}
        }

        var selected = [];//选择数组
        $(document).ready(function () {

            $('#datatable').dataTable();

			//重置全部选择
            $('#resetBtn').click(function () {
                resetFilter()
            })

            function resetFilter() {

                $('#branch').val('全部部门')
                $('#branch').selectmenu("refresh", true)
                
                $('#call').val('')
                $('#call').selectmenu("refresh", true)

                $('input[name="uid"]').val('');
            }
            
            // 选择当前行，排除对于操作列的click监听
            $('#datatable tbody').on('click', "tr", function () {

                var id = $(this).index();  // id 从server端获取

                var index = $.inArray(id, selected);

                if (index === -1) {
                    selected.push(id);
                } else {
                    selected.splice(index, 1);
                }

                $(this).toggleClass('selected');

                btnOnSelected(); // 监听是否全选，更改btn status

            });


            //下拉菜单初始化
            $('#branch').selectmenu({
                change: function (event, data) {
                    console.info('选择部门:')
                    console.log(data.item)
                }
            });
            $('#call').selectmenu({
                change: function (event, data) {
                    console.info('排序方式:')
                    console.log(data.item)
                }
            });
            
            $('input[name="daterange"]').daterangepicker(dateRangeConfig,
                function (start, end) {
                    console.log(start.format('YYYY-MM-DD'))
                    console.log(end.format('YYYY-MM-DD'))
                }
            );
            // radio添加class
            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-blue',
                radioClass: 'iradio_square-blue'
            });

        });
    </script>
    
</body>

</html>